window.onload=function(){let e=document.getElementById("canvas"),$=e.getContext("2d"),t=e.width,l=e.height,o=new Image;o.src="sprite/bird.png";let n=200,r=0,i=0,a=t;function d(){return Math.round(200*Math.random()+100)}let f=d();function c(){return 10*Math.round(3*Math.random())+150}let p=c(),s=new Image;s.src="sprite/clouds.png";let u=[],S=[150,200,250],y={x:Math.random()*t,y:50*Math.random(),velX:-.5,width:S[Math.floor(Math.random()*S.length)]};u.push(y);let _=0,m=!1,x=!1,h=!1,g=new Audio("soundeffects/wingsFlap.wav");g.volume=.7;let w=new Audio("soundeffects/bump.wav");w.volume=1;let v=new Audio("soundeffects/fall.wav");function C(){if($.clearRect(0,0,t,l),$.imageSmoothingEnabled=!0,$.imageSmoothingQuality="high",function e(){let o=$.createLinearGradient(0,0,0,l);o.addColorStop(0,"#005588"),o.addColorStop(.5,"#66ccff"),o.addColorStop(1,"#ffffff"),$.fillStyle=o,$.fillRect(0,0,t,l);let n=3.5+.05*_;for(let r=0;r<u.length;r++){let i=u[r];$.drawImage(s,i.x,i.y,i.width,80);let a=-(n/2);if(i.x+=a,i.x+i.width<0){u.splice(r,1),r--;continue}}if(.007>Math.random()&&u.length<=4){let d=S[Math.floor(Math.random()*S.length)];u.push({x:t+Math.random()*t/2,y:Math.random()*l/2.5,width:d})}}(),function e(t,o,n,r){let a=$.createLinearGradient(t,0,t+r,0);t+80<=2*r?(a.addColorStop(0,"#009c00"),a.addColorStop(.4,"#00bf00"),a.addColorStop(.6,"#00e600"),a.addColorStop(1,"#00bf00")):(a.addColorStop(0,"#005c00"),a.addColorStop(.4,"#007f00"),a.addColorStop(.6,"#00a600"),a.addColorStop(1,"#007f00")),$.fillStyle=a,$.fillRect(t-5,o-30,r+10,30),$.fillRect(t,0,r,o-29.9),$.fillRect(t-5,o+n,r+10,30),$.fillRect(t,o+n+30,r,l-o-n)}(a,f,p,50,600),$.save(),$.translate(75,n+25),$.rotate(i),$.fillStyle="yellow",$.drawImage(o,-25,-25,50,50),$.restore(),r+=.4,n+=r,r>0?(o.src="sprite/bird.png",i=Math.min(Math.PI/4,.06*r)):r<0&&(o.src="sprite/birdfly.png",i=Math.max(-Math.PI,.06*r)),function e(){let l=$.createLinearGradient(0,0,t,0);l.addColorStop(0,"#ff5722"),l.addColorStop(1,"#f44336"),$.fillStyle=l,$.textAlign="left",$.font="bold 30px Arial",$.fillText(`Score: ${_}`,10,30),$.strokeStyle="white",$.lineWidth=1,$.strokeText(`Score: ${_}`,10,30)}(),(a-=3.5+.05*_)+50<0&&(a=t,f=200*Math.random()+100,p=c(),_++),95>a&&50<a+50&&(n+10<f||n+50-10>f+p)&&(w.play(),m=!0),(n-800>l||n<-800)&&(v.play(),m=!0),m){$.textAlign="center",$.fillStyle="red",$.font="bold 50px Arial",$.fillText("Game Over",t/2,l/2-100),$.fillStyle="black",$.font="24px Verdana, sans-serif",$.fillText(`Your Score: ${_}`,t/2,l/2),$.fillText("Press Spacebar or",t/2,l/2+50),$.fillText("Touch the screen to restart",t/2,l/2+80);return}requestAnimationFrame(C)}v.volume=.4,!function e(){$.clearRect(0,0,t,l);let o=$.createLinearGradient(0,0,0,l);o.addColorStop(.5,"#66ccff"),o.addColorStop(1,"#ffffff"),$.fillStyle=o,$.fillRect(0,0,t,l),$.fillStyle="green",$.textAlign="center",$.font=" bold 50px Avenir",$.fillText("Birdie Bounce",t/2,l/2-180),$.font="18px Avenir",$.fillStyle="gray",$.fillText("created by: Nepo Aquino",t/2,l/2-150),$.fillStyle="black",$.font="24px Arial",$.fillText("Press Spacebar or",t/2,l/2+50),$.fillText("Touch the screen to start",t/2,l/2+80)}(),document.addEventListener("keydown",function(e){" "!==e.key||x?" "===e.key&&m?(x=!0,m=!1,_=0,n=200,r=0,a=400,f=d(),C()):" "!==e.key||h||(h=!0,g.play(),g.currentTime=0,r=-8):(x=!0,C())}),document.addEventListener("keyup",function(e){" "===e.key&&(h=!1)}),document.addEventListener("touchstart",function(){x?m||(g.play(),g.currentTime=0,r=-8):(x=!0,C())}),document.addEventListener("touchend",function(){m&&(x=!0,m=!1,_=0,n=200,r=0,a=400,f=d(),C())})};
